<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Baigan | Premium Experience</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <style>
        :root {
            --accent: #a020f0;
            --dark: #000;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        html, body {
            width: 100%;
            height: 100%;
            background: var(--dark);
            overflow: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* المشهد الرئيسي */
        .video-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1.2s ease-in-out;
            overflow: hidden;
        }

        /* Ambient Blur الخلفي - تم تخفيفه */
        .soft-ambient-blur {
            position: absolute;
            inset: -10%;
            z-index: 1;
            pointer-events: none;
        }

        .soft-ambient-blur video {
            width: 120%;
            height: 120%;
            object-fit: cover;
            filter: blur(20px) brightness(0.4) saturate(1.2); /* بلور أخف */
            opacity: 0.7;
            transform: scale(1.1);
            transition: filter 0.6s ease, transform 0.6s ease;
        }

        /* تأثير الألوان عند الضغط */
        .video-wrapper.clicking .soft-ambient-blur video {
            filter: blur(15px) brightness(0.7) saturate(2.5);
            transform: scale(1.15);
        }

        /* الفيديو الأساسي */
        .video-container {
            position: relative;
            z-index: 5;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            perspective: 1000px;
        }

        .main-video {
            width: 100%;
            height: 100%;
            object-fit: contain;
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }

        /* أنيميشن حي عند التوقف تجعل الموقع "يتنفس" */
        @keyframes breath {
            0% { transform: scale(0.97); filter: brightness(0.9); }
            50% { transform: scale(0.99); filter: brightness(1.1) drop-shadow(0 0 20px rgba(160, 32, 240, 0.3)); }
            100% { transform: scale(0.97); filter: brightness(0.9); }
        }

        .pause-effect .main-video {
            animation: breath 3s infinite ease-in-out;
        }

        /* طبقة التفاعل */
        #interaction-layer {
            position: absolute;
            inset: 0;
            z-index: 20;
            display: none;
            cursor: pointer;
        }

        /* السوشيال ميديا */
        .social-bar {
            position: absolute;
            bottom: 12%;
            left: 50%;
            transform: translateX(-50%) translateY(30px);
            display: flex;
            gap: 40px;
            opacity: 0;
            pointer-events: none;
            transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 25;
        }

        .social-bar.visible {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
            pointer-events: auto;
        }

        .social-bar a {
            color: #fff;
            font-size: clamp(32px, 5vw, 45px);
            transition: 0.3s;
            filter: drop-shadow(0 0 10px rgba(160, 32, 240, 0.5));
        }

        .social-bar a:hover {
            color: var(--accent);
            transform: scale(1.2) rotate(5deg);
        }

        /* الخروج */
        .site-exit {
            filter: blur(40px);
            opacity: 0;
            transform: scale(1.1);
            transition: 1.5s ease;
        }
    </style>
</head>

<body>

<div class="video-wrapper" id="scene">
    <div class="soft-ambient-blur">
        <video id="blurVideo" muted playsinline preload="auto" loop>
            <source src="baigan-intro.mp4" type="video/mp4">
        </video>
    </div>

    <div class="video-container">
        <video class="main-video" id="mainVideo" muted playsinline preload="auto">
            <source src="baigan-intro.mp4" type="video/mp4">
        </video>
    </div>

    <div id="interaction-layer"></div>

    <div class="social-bar" id="social">
        <a href="https://x.com/BaiganNft" target="_blank"><i class="fa-brands fa-x-twitter"></i></a>
        <a href="https://discord.gg/jsrsrVtVr7" target="_blank"><i class="fa-brands fa-discord"></i></a>
    </div>
</div>

<script>
const video = document.getElementById('mainVideo');
const blurVideo = document.getElementById('blurVideo');
const layer = document.getElementById('interaction-layer');
const scene = document.getElementById('scene');
const social = document.getElementById('social');

const pauses = [2.29, 6.23];
let currentPauseIndex = 0;

// تشغيل الفيديو بسلاسة
window.addEventListener('load', () => {
    const startPlay = () => {
        video.play();
        blurVideo.play();
        scene.style.opacity = 1;
    };

    video.play().then(startPlay).catch(() => {
        document.body.addEventListener('click', startPlay, { once: true });
    });
});

// مزامنة دقيقة
function syncVideos() {
    if (!video.paused) {
        if (Math.abs(video.currentTime - blurVideo.currentTime) > 0.1) {
            blurVideo.currentTime = video.currentTime;
        }
        
        if (currentPauseIndex < pauses.length && video.currentTime >= pauses[currentPauseIndex]) {
            pauseSequence();
        }
    }
    requestAnimationFrame(syncVideos);
}

requestAnimationFrame(syncVideos);

function pauseSequence() {
    video.pause();
    blurVideo.pause();
    scene.classList.add('pause-effect');
    layer.style.display = "block";
    social.classList.add('visible');
}

// تأثير عند الضغط للأسفل (Touch Start / Mouse Down)
layer.onmousedown = () => scene.classList.add('clicking');
layer.ontouchstart = () => scene.classList.add('clicking');

// تنفيذ الأكشن عند رفع الضغط (Click)
layer.onclick = () => {
    scene.classList.remove('pause-effect');
    scene.classList.remove('clicking');
    layer.style.display = "none";
    social.classList.remove('visible');
    currentPauseIndex++;
    video.play();
    blurVideo.play();
};

video.onended = () => {
    scene.classList.add('site-exit');
    setTimeout(() => {
        window.location.href = "https://baigan.xyz";
    }, 1200);
};
</script>

</body>
</html>